function isAtLeastOneRoomSelected(){var e=0;Solidres.jQuery(".reservation_room_select").each(function(){if(Solidres.jQuery(this).is(":checked"))return void e++}),e>0?Solidres.jQuery('#sr-reservation-form-room button[type="submit"]').removeAttr("disabled"):Solidres.jQuery('#sr-reservation-form-room button[type="submit"]').attr("disabled","disabled")}function ajaxProgressMedia(e){var t=Solidres.jQuery;if(e)var a=window.parent.Solidres.options.get("targetId"),o=window.parent.Solidres.options.get("token"),r=window.parent.Solidres.options.get("uriBase"),i=window.parent.Solidres.options.get("target"),n=t("#item-form",window.parent.document).find('input[name="jform[mediaId][]"]');else var a=Solidres.options.get("targetId"),o=Solidres.options.get("token"),r=Solidres.options.get("uriBase"),i=Solidres.options.get("target"),n=t("#item-form").find('input[name="jform[mediaId][]"]');if(n.length&&a&&a>0&&o){var s=[];n.each(function(){s.push(t(this).val())}),t.ajax({url:r+"index.php?option=com_solidres&task=media.ajaxProgressMedia&format=json",type:"post",dataType:"json",data:{targetId:a,mediaKeys:s,target:i,token:o},success:function(e){console.log(e)}})}}Solidres.options={data:{},get:function(e,t){return"undefined"!=typeof this.data[e.toUpperCase()]?this.data[e.toUpperCase()]:t},load:function(e){for(var t in e)this.data[t.toUpperCase()]=e[t];return this}},Solidres.jQuery(function(e){function t(t,a){e("option",t).each(function(){var t=parseInt(e(this).attr("value"));t>a?e(this).attr("disabled","disabled"):e(this).removeAttr("disabled")})}function a(){sum=0,e.each(e(".grand_total_sub"),function(){sum+=parseFloat(""!=e(this).text()?e(this).text():0)}),e(".grand_total").text(sum)}e("#solidres").on("click",".reservation-navigate-back",function(){e(".reservation-tab").removeClass("active"),e(".reservation-single-step-holder").removeClass("nodisplay").addClass("nodisplay");var t=e(this),a=t.data("step"),o=t.data("prevstep"),r=e("."+o).removeClass("nodisplay");r.find("button[type=submit]").removeAttr("disabled"),e(".reservation-tab-"+o).addClass("active").removeClass("complete"),e(".reservation-tab-"+o+" span.badge").removeClass("badge-success").addClass("badge-info"),e(".reservation-tab-"+a+" span.badge").removeClass("badge-info")}),e(".confirmation").on("click","#termsandconditions",function(){var t=e(this),a=e(".confirmation").find("button[type=submit]");t.is(":checked")?a.removeAttr("disabled"):a.attr("disabled","disabled")}),e("#media-select-all").click(function(){e(".media-checkbox").prop("checked",!0)}),e("#media-deselect-all").click(function(){e(".media-checkbox").prop("checked",!1)}),e(".media-sortable").length&&(e(".media-sortable").sortable({placeholder:"media-sortable-placeholder",update:function(e,t){ajaxProgressMedia(!1)}}),e(".media-sortable").disableSelection()),e("#media-library-delete").click(function(t){var a=e("#medialibraryform");a.off("submit").on("submit",function(t){t.preventDefault();var a=e(this),o=a.attr("action");e.post(o,a.serialize(),function(t){e.each(t,function(t,a){e("#sr_media_"+a).parent().remove()}),e("#media-messsage").empty().append('<div class="alert alert-success">'+t.length+" media deleted.</div>"),e.ajax({url:Solidres.options.get("BaseURI")+"index.php?option=com_solidres&task=medialist.show&format=json",data:{start:a.data("start"),limit:5},dataType:"JSON",success:function(t){e("#medialibrary").empty().html(t.html),e("#medialibraryform .pagination").empty().html(t.pagination)}})},"json")})}),e("#medialibraryform").on("click"," .pagination ul li a",function(t){t.preventDefault(),e("#medialibraryform .pagination ul li").removeClass("active");var a=e(this),o=e("#medialibraryform #mediasearch");a.parent().addClass("active"),e.ajax({url:Solidres.options.get("BaseURI")+"index.php?option=com_solidres&task=medialist.show&format=json",data:{start:a.data("start"),limit:5,q:o.val()},dataType:"JSON",success:function(t){e("#medialibrary").empty().html(t.html),e("#medialibraryform .pagination").empty().html(t.pagination)}})}),e("#medialibraryform").submit(function(t){t.preventDefault(),e("#medialibraryform .pagination ul li").removeClass("active");var a=e(this),o=e("#medialibraryform #mediasearch");a.parent().addClass("active"),e.ajax({url:Solidres.options.get("BaseURI")+"index.php?option=com_solidres&task=medialist.show&format=json",data:{start:a.data("start"),limit:5,q:o.val()},dataType:"JSON",success:function(t){e("#medialibrary").empty().html(t.html),e("#medialibraryform .pagination").empty().html(t.pagination)}})}),e("#media-library-insert").click(function(t){t.preventDefault(),e("#medialibrary input:checked").each(function(){if(null!==window.parent){var t=e(this).parent().prev(),a=t.attr("id"),o=t.attr("title");if(0==e("#"+a,window.parent.document).length){var r=e("<li>"),i=t.clone(),n=e("<input/>",{type:"hidden",name:"jform[mediaId][]",value:a.substring(9)}),s=e("<button/>",{type:"button","class":"btn btn-mini btn-danger btn-remove",html:'<i class="fa fa-trash"></i>'});e("#media-holder",window.parent.document).append(r.append(i,n,o,e("<p>").append(s)))}}}),window.parent&&ajaxProgressMedia(!0),parent.jQuery.fn.colorbox.close()}),e(document).on("click","#media-holder .btn-remove",function(){var t=e(this),a=Solidres.options.get("targetId"),o=Solidres.options.get("target"),r=Solidres.options.get("token"),i=Solidres.options.get("uriBase");a&&a>0&&r?(t.find(">.fa").removeClass("fa-trash").addClass("fa-spin fa-spinner"),e.ajax({url:i+"index.php?option=com_solidres&task=media.ajaxRemoveMedia&format=json",type:"post",dataType:"json",data:{targetId:a,target:o,mediaId:t.parent().siblings('input[name="jform[mediaId][]"]').val(),token:r},success:function(a){if(a.status)t.parents("li").remove();else{var o=e('<p class="label label-error">'+a.message+"</label>");t.after(o),window.setTimeout(function(){o.remove()},3e3)}}})):t.parents("li").remove()}),e("#solidres .guestinfo").on("change",".country_select",function(){e.ajax({url:Solidres.options.get("BaseURI")+"index.php?option=com_solidres&format=json&task=states.find&id="+e(this).val(),success:function(t){e(".state_select").empty(),t.length>0&&e(".state_select").html(t)}})}),e("#solidres .room").on("change",".trigger_tariff_calculating",function(t,a){var o=e(this),r=o.data("raid"),i=o.data("roomtypeid"),n=o.data("roomindex"),s=o.data("roomid"),d=o.attr("data-tariffid"),l=o.attr("data-adjoininglayer");if("frontend"==Solidres.context&&1!=Solidres.options.get("Hub_Dashboard"))var c=i+"_"+d+"_"+n;else var c=i+"_"+d+"_"+s;var m=1;e("select.adults_number[data-identity='"+c+"']").length&&(m=e("select.adults_number[data-identity='"+c+"']").val());var p=0;if(e("select.children_number[data-identity='"+c+"']").length&&(p=e("select.children_number[data-identity='"+c+"']").val()),e("select.guests_number[data-identity='"+c+"']").length)var f=e("select.guests_number[data-identity='"+c+"']").val();if("undefined"!=typeof a&&null!==a||(a=!0),(a||!o.hasClass("reservation-form-child-quantity"))&&!(o.hasClass("reservation-form-child-quantity")&&p>=1)){var u={};u.raid=r,u.room_type_id=i,u.room_index=n,u.room_id=s,u.adult_number=m,u.child_number=p,f&&(u.guest_number=f),u.tariff_id=d,u.adjoining_layer=l,u.extras=[];for(var _=0;_<p;_++){var h="child_age_"+c+"_"+_;u[h]=e("."+h).val()}var v=e(".extras_row_roomtypeform_"+c+" input[type='checkbox']");v.length&&v.each(function(){this.checked&&(u[e(this).attr("data-target")]=e(this).parent().find("select").val(),u.extras.push(e(this).attr("data-extraid")))}),e.ajax({type:"GET",url:Solidres.options.get("BaseURI")+"index.php?option=com_solidres&task=reservationasset"+("frontend"==Solidres.context?"":"base")+".calculateTariff&format=json",data:u,success:function(t){t.room_index_tariff.code||t.room_index_tariff.value?(e(".tariff_"+c).text(t.room_index_tariff.formatted),e("#breakdown_"+c).empty().html(t.room_index_tariff_breakdown_html)):e(".tariff_"+c).text("0")},dataType:"json"})}}),e("#solidres").on("click",".toggle_breakdown",function(){var t=e(this).attr("data-target");e("#breakdown_"+t).toggle()}),e("#solidres").on("click",".toggle_extra_details",function(){var t=e(this).data("target");e("#"+t).toggle()}),e("#solidres").on("click",".toggle_extracost_confirmation",function(){var t=e(".extracost_confirmation");e(this);t.toggle(),t.is(":hidden")?e(".extracost_row").removeClass().addClass("nobordered extracost_row"):e(".extracost_row").removeClass().addClass("nobordered extracost_row first")}),e("#solidres").on("change",".reservation-form-child-quantity",function(t,a){if("undefined"!=typeof a&&null!==a||(a=!0),a){var o=e(this),r=o.val(),i="",n=o.data("raid"),s=o.data("roomtypeid"),d=o.data("roomid"),l=o.data("roomindex"),c=o.data("tariffid"),m=o.parent().find(".child-age-details");r>0?m.removeClass("nodisplay"):m.addClass("nodisplay");for(var p=0;p<r;p++){i+="<li>"+Joomla.JText._("SR_CHILD")+" "+(p+1)+' <select name="jform[room_types]['+s+"]["+c+"]["+("frontend"==Solidres.context&&1!=Solidres.options.get("Hub_Dashboard")?l:d)+'][children_ages][]" data-raid="'+n+'"data-roomtypeid="'+s+'"data-roomid="'+d+'"data-roomindex="'+l+'"data-tariffid="'+c+'"required class="span6 child_age_'+s+"_"+c+"_"+("frontend"==Solidres.context&&1!=Solidres.options.get("Hub_Dashboard")?l:d)+"_"+p+' trigger_tariff_calculating"> ',i+='<option value=""></option>';for(var f=1;f<=Solidres.child_max_age_limit;f++)i+='<option value="'+f+'">'+(f>1?f+" "+Joomla.JText._("SR_CHILD_AGE_SELECTION_JS"):f+" "+Joomla.JText._("SR_CHILD_AGE_SELECTION_1_JS"))+"</option>";i+="</select></li>"}m.find("ul").empty().append(i)}});var o=function(t){var a=e(t),o=a.attr("action"),r=a.parent(".reservation-single-step-holder"),i=a.find("button[type=submit]"),n=i.data("step");i.attr("disabled","disabled"),i.html('<i class="fa fa-arrow-right"></i> '+Joomla.JText._("SR_PROCESSING")),e("div.wizard").length>0&&e("html, body").animate({scrollTop:e("div.wizard").offset().top},700),e.post(o,a.serialize(),function(t){1==t.status&&e.ajax({type:"GET",cache:!1,url:Solidres.options.get("BaseURI")+"index.php?option=com_solidres&task=reservation"+("backend"==Solidres.context?"base":"")+".progress&next_step="+t.next_step,success:function(a){r.addClass("nodisplay"),i.removeClass("nodisplay"),i.html('<i class="fa fa-arrow-right"></i> '+Joomla.JText._("SR_NEXT"));var o=e("."+t.next_step);o.removeClass("nodisplay"),o.empty().append(a),"payment"==t.next&&e.metadata.setType("attr","validate"),location.hash="#form",e(".reservation-tab").removeClass("active"),e(".reservation-tab-"+n).addClass("complete"),e(".reservation-tab-"+n+" span.badge").removeClass("badge-info").addClass("badge-success"),e(".reservation-tab-"+t.next_step).addClass("active"),e(".reservation-tab-"+t.next_step+" span.badge").addClass("badge-info");var s=o.find("form.sr-reservation-form");"sr-reservation-form-guest"==s.attr("id")?(s.validate({rules:{"jform[customer_email]":{required:!0,email:!0},"jform[payment_method]":{required:!0},"jform[customer_password]":{require:!1,minlength:8},"jform[customer_username]":{required:!1,remote:{url:Solidres.options.get("BaseURI")+"index.php?option=com_solidres&task=user.check&format=json",type:"POST",data:{username:function(){return e("#username").val()}}}}},messages:{"jform[customer_username]":{remote:Joomla.JText._("SR_USERNAME_EXISTS")}}}),e(".popover_payment_methods").webuiPopover({trigger:"click",placement:"auto-bottom"}),"function"==typeof onSolidresAfterSubmitReservationForm&&onSolidresAfterSubmitReservationForm()):s.validate(),(o.hasClass("confirmation")||o.hasClass("guestinfo"))&&e(".toggle_room_confirmation").click(function(){e("#rc_"+e(this).data("target")+(o.hasClass("confirmation")?"_confirmation":"_guestinfo")).toggle()})}})},"json")};e("#solidres").on("submit","form.sr-reservation-form",function(e){e.preventDefault(),o(this)}),e(".roomtype-reserve-exclusive").click(function(){var t=e(this),a=t.data("tariffid"),r=t.data("rtid");t.siblings('input[name="jform[room_types]['+r+"]["+a+'][1][adults_number]"]').removeAttr("disabled"),o(document.getElementById("sr-reservation-form-room"))}),e.fn.srRoomType=function(t){t=e.extend({},t);var a=function(){e(".delete-room-row").unbind().click(function(){removeRoomRow(this)})};return a(),removeRoomRow=function(t){var a=e(t),o=a.next(),r=a.attr("id");o.addClass("ajax-loading"),null!=r?(roomId=r.substring(16),e.ajax({url:Solidres.options.get("BaseURI")+"index.php?option=com_solidres&task=roomtype"+("frontend"==Solidres.context?"frontend":"")+".checkRoomReservation&tmpl=component&format=json&id="+roomId,context:document.body,dataType:"JSON",success:function(t){o.removeClass("ajax-loading"),t?a.parent().parent().remove():(o.addClass("delete-room-row-error"),o.html(Joomla.JText._("SR_FIELD_ROOM_CAN_NOT_DELETE_ROOM")+' <a class="room-confirm-delete" data-roomid="'+roomId+'" href="#">Yes</a> | <a class="room-cancel-delete" href="#">No</a>'),e(".tier-room").on("click",".room-confirm-delete",function(){e.ajax({url:Solidres.options.get("BaseURI")+"index.php?option=com_solidres&task=roomtype"+("frontend"==Solidres.context?"frontend":"")+".removeRoomPermanently&tmpl=component&format=json&id="+roomId,context:document.body,dataType:"JSON",success:function(e){e&&a.parent().parent().remove()}})}),e(".tier-room").on("click",".room-cancel-delete",function(){o.html("")}))}})):a.parent().parent().remove()},initRoomRow=function(){var o=t.rowIdRoom,r="tier-room-"+o,i="";e("#room_tbl tbody").append('<tr id="'+r+'" class="tier-room"></tr>');var n=e("#"+r);i+='<td><a class="delete-room-row btn btn-default"><i class="fa fa-minus"></i></a></td>',i+='<td><input type="text" name="jform[rooms]['+o+'][label]" required />',i+='<input type="hidden" name="jform[rooms]['+o+'][id]" value="new" /></td>',n.append(i),a()},e("#new-room-tier").click(function(e){e.preventDefault(),initRoomRow(),t.rowIdRoom++}),this},e("#jform_reservation_asset_id").change(function(t){e.ajax({url:Solidres.options.get("BaseURI")+"index.php?option=com_solidres&format=json&task=coupons"+("frontend"==Solidres.context?"frontend":"")+".find&id="+e(this).val(),success:function(t){e("#coupon-selection-holder").empty().html(t)}}),e.ajax({url:Solidres.options.get("BaseURI")+"index.php?option=com_solidres&format=json&task=extras"+("frontend"==Solidres.context?"frontend":"")+".find&id="+e(this).val(),success:function(t){e("#extra-selection-holder").empty().html(t)}})}),e("#solidres").on("change",".occupancy_max_constraint",function(){var a=e(this),o=a.data("max"),r=a.data("min"),i=a.data("roomtypeid"),n=0,s=0,d=a.data("roomindex"),l=a.data("roomid"),c=a.attr("data-tariffid");if("frontend"==Solidres.context)var m=d+"_"+c+"_"+i;else var m=l+"_"+c+"_"+i;if(o>0&&(e(".occupancy_max_constraint_"+m).each(function(){var t=e(this),a=parseInt(t.val());a>0&&(n+=a)}),s=o-n,e(".occupancy_max_constraint_"+m).each(function(){var a=e(this),o=parseInt(a.val()),r=0;r=o>0?o+s:s,t(a,r)})),r>0){var p=0;e(".occupancy_max_constraint_"+m).each(function(){var t=e(this),a=parseInt(t.val());a>0&&(p+=a)}),p<r?(e("#error_"+m).show(),e(".occupancy_max_constraint_"+m).addClass("warning"),e('#sr-reservation-form-room button[type="submit"]').attr("disabled","disabled")):(e("#error_"+m).hide(),e(".occupancy_max_constraint_"+m).removeClass("warning"),e('#sr-reservation-form-room button[type="submit"]').removeAttr("disabled","disabled"))}}),e("#solidres").on("click",".reservation_room_select",function(){var t=e(this),a=e("#room_selection_details_"+t.val()),o=e("#room"+t.val()+" dl dt table"),r=e("#room"+t.val()+" dl dt label span");t.is(":checked")?(a.show(),o.show(),r.addClass("label-success"),a.children("select.tariff_selection").removeAttr("disabled"),a.children("input.guest_fullname").removeAttr("disabled"),a.children("select.adults_number").removeAttr("disabled"),a.children("select.children_number").removeAttr("disabled"),e("#room_selection_details_"+t.val()+" .extras_row_roomtypeform").each(function(){var t=e(this),a=t.children("input:checkbox");if(a.is(":checked")){var o=t.children("select");o.removeAttr("disabled")}})):(a.hide(),o.hide(),r.removeClass("label-success"),a.children("select.tariff_selection").attr("disabled","disabled"),a.children("input.guest_fullname").attr("disabled","disabled"),a.children("select.adults_number").attr("disabled","disabled"),a.children("select.children_number").attr("disabled","disabled"),a.find("input:hidden").attr("disabled","disabled"),a.find(".extras_row_roomtypeform select").attr("disabled","disabled")),isAtLeastOneRoomSelected()}),e("#solidres").on("click",".room input:checkbox, .guestinfo input:checkbox",function(){var t=e(this);t.is(":checked")?(e("."+t.data("target")).removeAttr("disabled"),e("."+t.data("target")).trigger("change")):(e("."+t.data("target")).attr("disabled","disabled"),e("."+t.data("target")).trigger("change"))}),e("#solidres").on("click",".guestinfo input#processonlinepayment",function(){var t=e(this);t.is(":checked")?e("."+t.data("target")).show():e("."+t.data("target")).hide()}),e("#solidres").on("change",".tariff_selection",function(){var t=e(this);if(""==t.val())return e("a.tariff_breakdown_"+t.data("roomid")).hide(),e("span.tariff_breakdown_"+t.data("roomid")).text("0"),!1;var a=t.parents(".room_selection_wrapper"),o=a.find('.room_selection_details input[type="text"]'),r=a.find('.room_selection_details input[type="checkbox"]'),i=a.find(".room_selection_details select").not(t),n=a.find("dt span"),s=a.find("dt a.toggle_breakdown"),d=a.find("dt span.breakdown"),l=a.find('.extras_row_roomtypeform input[type="hidden"]'),c=t.find(":selected").data("adjoininglayer");o.attr("name",o.attr("name").replace(/^(jform\[room_types\])(\[[0-9]+\])(\[[-?0-9a-z]*\])(.*)$/,"$1$2["+t.val()+"]$4")),l.length>0&&l.attr("name",l.attr("name").replace(/^(jform\[room_types\])(\[[0-9]+\])(\[[0-9a-z]*\])(.*)$/,"$1$2["+t.val()+"]$4")),i.each(function(){var a=e(this);a.attr("name",a.attr("name").replace(/^(jform\[room_types\])(\[[0-9]+\])(\[[-?0-9a-z]*\])(.*)$/,"$1$2["+t.val()+"]$4")),a.attr("data-tariffid",t.val()),a.attr("data-identity")&&a.attr("data-identity",a.attr("data-identity").replace(/^([0-9]+)(_)([-?0-9a-z]*)(_)(.*)$/,"$1$2"+t.val()+"$4$5")),a.attr("data-adjoininglayer",c)}),r.each(function(){e(this).removeAttr("disabled")}),s.attr("data-target",s.data("target").replace(/^([0-9]+)(_)([0-9a-z]*)(_)(.*)$/,"$1$2"+t.val()+"$4$5")),d.attr("id",d.attr("id").replace(/^([a-z]+)(_)([0-9]+)(_)([-?0-9a-z]*)(_)(.*)$/,"$1$2$3$4"+t.val()+"$6$7")),n.each(function(){var a=e(this);a.attr("class",a.attr("class").replace(/^([a-z]+)(_)([0-9]+)(_)([-?0-9a-z]*)(_)(.*)$/,"$1$2$3$4"+t.val()+"$6$7"))}),""!=t.val()?e(".tariff_breakdown_"+t.data("roomid")).show():e(".tariff_breakdown_"+t.data("roomid")).hide(),e("#room"+t.data("roomid")+" .adults_number.trigger_tariff_calculating").trigger("change")}),e("#solidres").on("change paste keyup","#sr-reservation-form-confirmation .total_price_tax_excl_single_line",function(){var t=0;e.each(e(".total_price_tax_excl_single_line"),function(){t+=parseFloat(""!=e(this).val()?e(this).val():0)}),e(".total_price_tax_excl").text(t),a()}),e("#solidres").on("change paste keyup","#sr-reservation-form-confirmation .room_price_tax_amount_single_line",function(){var t=0;e.each(e(".room_price_tax_amount_single_line"),function(){t+=parseFloat(""!=e(this).val()?e(this).val():0)}),e(".tax_amount").text(t),a()}),e("#solidres").on("change paste keyup","#sr-reservation-form-confirmation .extra_price_single_line",function(){var t=0;e.each(e(".extra_price_single_line"),function(){t+=parseFloat(""!=e(this).val()?e(this).val():0)}),e(".total_extra_price").text(t),a()}),e("#solidres").on("change paste keyup","#sr-reservation-form-confirmation .extra_tax_single_line",function(){var t=0;e.each(e(".extra_tax_single_line"),function(){t+=parseFloat(""!=e(this).val()?e(this).val():0)}),e(".total_extra_tax").text(t),a()}),e(".toggle_child_ages").click(function(){e(this).next("ul").toggle()})});
//# sourceMappingURL=maps/common.min.js.map
